<section class="gallery-container">
{{ $images := resources.Match "images/studies/*" }}

{{ range $images }}
{{ $name := replaceRE "\.[^.]+$" "" .Name }}
<div class="project-card span-1 importance-1" data-image="{{ .RelPermalink }}">
    <div class="project-thumb">
        <img src="{{ .RelPermalink }}" alt="{{ $name | humanize }}">
        <div class="project-overlay">
            <h3 class="project-title">{{ $name | humanize }}</h3>
        </div>
    </div>
</div>
{{ end }}
</section>

<!-- Lightbox for studies -->
<div id="lightbox" class="lightbox">
    <button class="lightbox-close">&times;</button>
    <img id="lightbox-image" src="" alt="">
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    var lightbox = document.getElementById('lightbox');
    var lightboxImage = document.getElementById('lightbox-image');
    var closeBtn = document.querySelector('.lightbox-close');
    var importance1Cards = document.querySelectorAll('.importance-1');

    if (lightbox && importance1Cards.length > 0) {
        importance1Cards.forEach(function(card) {
            card.addEventListener('click', function() {
                var imageUrl = this.getAttribute('data-image');
                lightboxImage.src = imageUrl;
                lightbox.classList.add('active');
            });
        });

        closeBtn.addEventListener('click', function() {
            lightbox.classList.remove('active');
        });

        lightbox.addEventListener('click', function(e) {
            if (e.target === lightbox) {
                lightbox.classList.remove('active');
            }
        });

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && lightbox.classList.contains('active')) {
                lightbox.classList.remove('active');
            }
        });
    }
});
</script>
